<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{{TITLE}} | {{SITE_NAME}}</title>
  <meta name="description" content="{{DESCRIPTION}}">
  <meta name="author" content="{{AUTHOR}}">

  <!-- Canonical will be injected by bake.ps1 -->
  <!-- Robots will be injected by bake.ps1 -->

  <!-- Open Graph -->
  <meta property="og:title" content="{{TITLE}} | {{SITE_NAME}}">
  <meta property="og:description" content="{{DESCRIPTION}}">
  <!-- Will be replaced by bake.ps1 with an ABSOLUTE URL if assets/img/og.(jpg|jpeg|png|webp) exists -->
  <meta property="og:image" content="{{PREFIX}}assets/img/og.jpeg">
  <meta property="og:type" content="website">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">

  <link rel="icon" href="{{PREFIX}}assets/favicon.ico">

  <!-- Early theme boot (prevents flash) -->
  <script>
    (function () {
      try {
        var key = 'asd-theme';
        var saved = localStorage.getItem(key);
        var theme = saved ? saved : (
          window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'
        );
        document.documentElement.setAttribute('data-theme', theme);
      } catch (e) {}
    })();
  </script>

  <link rel="stylesheet" href="{{PREFIX}}assets/css/style.css">

  <!-- Feeds will be added by bake.ps1 if missing -->
  <link rel="alternate" type="application/rss+xml"  title="{{SITE_NAME}} RSS"  href="{{PREFIX}}feed.xml">
  <link rel="alternate" type="application/atom+xml" title="{{SITE_NAME}} Atom" href="{{PREFIX}}atom.xml">
</head>
<body>
  <header>
    <h1><a href="{{PREFIX}}index.html">{{SITE_NAME}}</a></h1>

    <!-- Mobile toggle -->
    <button id="navToggle" class="nav-toggle"
            aria-expanded="false" aria-controls="site-nav" aria-label="Open menu">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>

    <nav id="site-nav">
      <ul>
        <li><a href="{{PREFIX}}index.html">Home</a></li>
        <li><a href="{{PREFIX}}blog/">Blog</a></li>
        <li><a href="{{PREFIX}}search.html">Search</a></li>
        <li><a href="{{PREFIX}}about.html">About</a></li>
        <li><a href="{{PREFIX}}contact.html">Contact</a></li>
        <li><a href="{{PREFIX}}legal/privacy.html">Privacy</a></li>
        <li><a href="{{PREFIX}}legal/terms.html">Terms</a></li>
        <li><a href="{{PREFIX}}sitemap.html">Sitemap</a></li>
      </ul>
    </nav>
  </header>

  <!-- KEEP CONTENT ON ONE LINE TO AVOID WHITESPACE GROWTH -->
  <main>{{CONTENT}}</main>

  <footer>
    <p>
      <a href="{{PREFIX}}index.html">Home</a> |
      <a href="{{PREFIX}}blog/">Blog</a> |
      <a href="{{PREFIX}}search.html">Search</a> |
      <a href="{{PREFIX}}about.html">About</a> |
      <a href="{{PREFIX}}contact.html">Contact</a> |
      <a href="{{PREFIX}}legal/privacy.html">Privacy</a> |
      <a href="{{PREFIX}}legal/terms.html">Terms</a> |
      <a href="{{PREFIX}}sitemap.html">Sitemap</a>
    </p>
    <p>&copy; {{YEAR}} {{SITE_NAME}}. All rights reserved.</p>
  </footer>

  <!-- Single rectangular theme toggle -->
  <button
    class="asd-theme-toggle"
    id="asd-theme-toggle"
    type="button"
    title="Toggle theme"
    aria-label="Toggle theme"
    onclick="(function(d){var k='asd-theme';var cur=d.getAttribute('data-theme')||'light';var nxt=(cur==='dark'?'light':'dark');d.setAttribute('data-theme',nxt);try{localStorage.setItem(k,nxt);}catch(e){} })(document.documentElement)">
    🌙 / ☀
  </button>

  <script>
    /* Mobile menu */
    (function () {
      var btn = document.getElementById('navToggle');
      var nav = document.getElementById('site-nav');
      if (!btn || !nav) return;

      function set(open) {
        btn.setAttribute('aria-expanded', open);
        nav.classList.toggle('open', open);
        btn.classList.toggle('is-active', open);
      }
      btn.addEventListener('click', function () { set(btn.getAttribute('aria-expanded') !== 'true'); });
      document.addEventListener('keydown', function (e) { if (e.key === 'Escape') set(false); });
      nav.addEventListener('click', function (e) { if (e.target && e.target.tagName === 'A') set(false); });
    })();
  </script>
</body>
</html>
